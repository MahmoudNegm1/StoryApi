# -*- coding: utf-8 -*-
"""
üîß Configuration Module
"""

import os

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

# ================== WaveSpeed API Configuration ==================
WAVESPEED_API_KEY = "5245087bfe91fb4213628401ccfac875329ee1e2a58518a0daff0c22abb20c3b"
NANO_BANANA_API_URL = "https://api.wavespeed.ai/api/v3/google/nano-banana-pro/edit-ultra"
NANO_BANANA_RESOLUTION = "4k"  # "4k" or "8k" for higher quality
WAVESPEED_OUTPUT_FORMAT = "jpeg"  # ÿ£Ÿà "png"
WAVESPEED_SYNC_MODE = True  # True = ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÅŸàÿ±ÿßŸã, False = ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ÿπÿ®ÿ± polling
WAVESPEED_TIMEOUT = 60 * 7 # 5 minutes 
NANO_BANANA_PROMPT = "Replace ONLY the person's head/face in this image with the head/face from the reference image. IMPORTANT: Keep the EXACT original image dimensions, aspect ratio, and composition - DO NOT crop, resize, or change the image size in any way. Preserve the original pose, body, clothing, lighting, background, and all other elements exactly as they are. Only modify the head/face area to match the reference, ensuring natural blending with realistic skin tones, shadows, and facial expression that matches the original angle and lighting."


GEMINI_API_KEY = "AIzaSyAv8W4cQZod4PAXgI9yAyxGqRZKh1gItH0"
GEMINI_MODEL = "gemini-3-pro-image-preview"
GEMINI_TIMEOUT= 180
GEMINI_IMAGE_SIZE = "2K"   # "1K" | "2K" | "4K"  (K ŸÑÿßÿ≤ŸÖ Capital) :contentReference[oaicite:1]{index=1}




# =================Sigmoid=====================
SEGMIND_API_KEY = "SG_a86634f6eea7e457"
SEGMIND_TIMEOUT = 580
SEGMIND_SAFETY  = 3     
SEGMIND_SEED    = 42   

# ================== ImgBB Configuration ==================
IMGBB_API_KEY = "3b4cd701f4471dee2c2c67a0d13d711e"
IMGBB_UPLOAD_URL = "https://api.imgbb.com/1/upload"

# ================== Font Paths ==================
EN_FIRST_SLIDE_FONT = os.path.join(BASE_DIR, "Fonts/english fonts/Irish_Grover/IrishGrover-Regular.ttf")
EN_REST_SLIDES_FONT = os.path.join(BASE_DIR, "Fonts/english fonts/static/PlayfairDisplay-Bold.ttf")
AR_FIRST_SLIDE_FONT = os.path.join(BASE_DIR, "Fonts/arabic fonts/alfont_com_KAF-GULZAR-PC.otf")
AR_REST_SLIDES_FONT = os.path.join(BASE_DIR, "Fonts/arabic fonts/alfont_com_Al-Haroni-Mashnab-Salawat.ttf")

#==================Openai Conf=====================

OPENAI_API_KEY = "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"
OPENAI_MODEL = "gpt-4o"
# ================== Folder Paths ==================
STORIES_FOLDER = os.path.join(BASE_DIR, "Stories")
CHARACTERS_FOLDER = os.path.join(BASE_DIR, "characters")
RESULT_FOLDER = os.path.join(BASE_DIR, "Result")
TEMP_CROPPED_FOLDER = os.path.join(BASE_DIR, "temp_cropped_faces")

# ================== Text Rendering ==================
ENABLE_TEXT_SHADOW = True
TEXT_SHADOW_STYLE = "2px 2px 4px rgba(0, 0, 0, 0.9)"

# Shadow Effect Settings
SHADOW_BLUR_RADIUS = 4          # ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ∂ÿ®ÿßÿ®Ÿäÿ©
SHADOW_COLOR = (0, 0, 0, 255)   # ŸÑŸàŸÜ ÿßŸÑÿ∏ŸÑ (R, G, B, Alpha)
SHADOW_OFFSET_X = 0             # ÿ•ÿ≤ÿßÿ≠ÿ© ÿßŸÑÿ∏ŸÑ ÿ£ŸÅŸÇŸäÿßŸã
SHADOW_OFFSET_Y = 5             # ÿ•ÿ≤ÿßÿ≠ÿ© ÿßŸÑÿ∏ŸÑ ÿπŸÖŸàÿØŸäÿßŸã



# ================== Processing Settings ==================
HEAD_SWAP_DELAY = 0.2  # Delay between API calls in seconds (Reduced from 1s)
RETRY_DELAY = 0.5      # Delay before retrying failed API calls
MAX_RETRIES = 2        # Maximum number of retries for API calls
SIMILARITY_THRESHOLD = 0.97  # Threshold for considering face unchanged (0.0 to 1.0)

# ================== Parallel Processing Settings ==================
API_WORKERS = 3       # Number of simultaneous API calls
UPLOAD_WORKERS = 5    # Number of simultaneous image uploads
USE_PARALLEL_TEXT_PROCESSING = True  # Enable parallel text rendering
from multiprocessing import cpu_count
MAX_TEXT_WORKERS = max(1, cpu_count() - 1)  # Number of parallel workers for text processing



